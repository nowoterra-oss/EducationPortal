# ============================================================
# EduPortal TEST Environment - Systemd Service
# ============================================================
# Installation:
#   sudo cp systemd/eduportal-test.service /etc/systemd/system/
#   sudo systemctl daemon-reload
#   sudo systemctl enable eduportal-test
#   sudo systemctl start eduportal-test
#
# Management:
#   sudo systemctl status eduportal-test
#   sudo systemctl restart eduportal-test
#   sudo journalctl -u eduportal-test -f
# ============================================================

[Unit]
Description=EduPortal TEST Environment (API + MSSQL)
Documentation=https://github.com/your-org/EducationPortal
After=docker.service network-online.target
Requires=docker.service
Wants=network-online.target

[Service]
Type=oneshot
RemainAfterExit=yes
User=root
Group=docker

# Set working directory (UPDATE THIS PATH)
WorkingDirectory=/opt/eduportal

# Start command
ExecStart=/usr/bin/docker-compose -f docker-compose.test.yml --env-file .env.test up -d

# Stop command
ExecStop=/usr/bin/docker-compose -f docker-compose.test.yml --env-file .env.test down

# Restart policy
Restart=on-failure
RestartSec=10

# Timeout settings
TimeoutStartSec=300
TimeoutStopSec=60

# Environment
Environment=DOCKER_HOST=unix:///var/run/docker.sock

[Install]
WantedBy=multi-user.target
